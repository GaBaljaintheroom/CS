## 운영체제

**정의**
- 실행할 프로그램에 필요한 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램

**특징**
- 커널 영역에서 실행되는 프로그램
- 실행할 프로그램을 메모리에 적재하고, 더 이상 실행되지 않는 프로그램을 메모리에서 삭제하며 지속적으로 메모리 자원을 관리함
- 하드웨어를 조작하는 코드를 직접 작성할 필요가 없음


**커널** 
- 운영체제의 핵심 서비스르 담당하는 부분
- 사용자 인터페이스는 사용자가 컴퓨터와 상호작용할 수 있는 통로인데, 커널에 포함되지는 않는다.

### 이중 모드와 시스템 호출

- 운영체제는 사용자가 실행하는 응용 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호합니다.

- 이중 모드
  - CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식
  - **사용자 모드**
    - 운영체제 서비스를 제공받을 수 없는 실행 모드
    - 커널 영역의 코드를 실행할 수 없는 모드
    - 일반적인 응용 프로그램은 기본적으로 사용자 모드로 실행됨
    - 입출력 명령어와 같이 하드웨어 자원에 접근하는 명령어를 실행할 수 없음
    - 따라서 사용자 모드로 실행되는 일반적읜 응용 프로그램은 자원에 접근할 수 없음
  - **커널 모드**
    - 운영체제 서비스를 제공받을 수 있는 실행 모드
    - 시스템 호출 : 사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으로면 운영체제에 커널 모드로 전환하기 위한 요청
      - 소프트웨어 인터럽트임
      - 순서
        1. 하드 디스크에 데이터를 저장하는 시스템 호출을 발생시켜 커널 모드로 전환
        2. 운영체제 내의 하드 디스크에 데이터를 저장하는 코드를 실행함으로써 하드 디스크에 접근할 수 있음
        3. 하드 디스크에 접근이 끝났다면 다시 사용자 모드로 복귀하여 실행을 계속해 나감
           <img width="837" alt="image" src="https://github.com/user-attachments/assets/1320d41e-e223-4dcb-8e02-d90d8b26671d" />

         
  - CPU가 사용자 모드로 실행 중인지, 커널 모드로 실행 중인지는 플래그 레지스터 속 슈퍼바이저 플래그를 보면 알 수 있음

### 운영체제의 핵심 서비스

**프로세스 관리**
- 일반적으로 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있기에 CPU는 이 프로세스들을 조금씩 번갈아가면서 실행
- 따라서 다양한 프로세스를 어떻게 관리하고 실행하는지 정해야함

**자원 접근 및 할당**
- CPU : 여러 프로세스들을 CPU 스케줄링을 통해 관리
- 메모리 : 새로운 프로세스가 적재될 때마다 어느 주소에 적재해야 할지를 결정해야 함
- 입출력장치 : 입출력장치가 인터럽트 요청 신호를 보내면 CPU는 하던 일을 잠시 백업한 뒤 커널 영역에 있는 인털펍트 서비스 루틴을 실행함

**파일 시스템 관리**
- 보조기억장치 속 데이터를 파일과 디렉터리로 관리
